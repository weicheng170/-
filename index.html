<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>盒中氣體模擬</title>
<style>
  body { font-family: sans-serif; text-align: center; background: #f8f9fa; }
  canvas { border: 2px solid #333; background: white; display:block; margin: 10px auto; }
  .slider-container { margin: 10px; }
</style>
</head>
<body>
<h2>盒中氣體模擬 (含粒子間碰撞)</h2>

<div class="slider-container">
  <label>體積 V:
    <input type="range" id="volumeSlider" min="200" max="800" value="400">
    <span id="volumeVal">400</span>
  </label>
</div>
<div class="slider-container">
  <label>粒子數 N:
    <input type="range" id="particleSlider" min="10" max="100" value="30">
    <span id="particleVal">30</span>
  </label>
</div>
<div class="slider-container">
  <label>溫度 T:
    <input type="range" id="tempSlider" min="50" max="500" value="200">
    <span id="tempVal">200</span>
  </label>
</div>

<p>壓力 P: <span id="pressure">0</span></p>

<canvas id="box" width="400" height="400"></canvas>

<script>
const canvas = document.getElementById("box");
const ctx = canvas.getContext("2d");
let V = 400, N = 30, T = 200;
let particles = [];
let pressure = 0;
let momentumTransfer = 0;

document.getElementById("volumeSlider").oninput = function() {
  V = +this.value;
  document.getElementById("volumeVal").textContent = V;
  canvas.width = V; canvas.height = V;
  resetParticles();
}
document.getElementById("particleSlider").oninput = function() {
  N = +this.value;
  document.getElementById("particleVal").textContent = N;
  resetParticles();
}
document.getElementById("tempSlider").oninput = function() {
  T = +this.value;
  document.getElementById("tempVal").textContent = T;
  resetParticles();
}

class Particle {
  constructor(x, y, vx, vy, r=4) {
    this.x = x; this.y = y;
    this.vx = vx; this.vy = vy;
    this.r = r;
  }
  mov
